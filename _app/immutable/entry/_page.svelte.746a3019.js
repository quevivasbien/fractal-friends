var kt=Object.defineProperty;var Mt=(r,t,e)=>t in r?kt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var st=(r,t,e)=>(Mt(r,typeof t!="symbol"?t+"":t,e),e);import{S as At,i as Ct,s as jt,k as p,q as z,a as N,l as b,m as w,r as K,h as d,c as R,n as m,J as Vt,p as rt,b as T,G as c,K as wt,L as nt,M as Z,N as ct,H as ht,O as Lt,P as St,o as Gt,Q as Nt,w as _t}from"../chunks/index.06967d51.js";class vt{constructor(t,e,s,i){this.x0=t,this.y0=e,this.x1=s,this.y1=i}get width(){return this.x1-this.x0}get height(){return this.y1-this.y0}}class X{constructor(t,e){this.re=t,this.im=e}add(t){return new X(this.re+t.re,this.im+t.im)}mul(t){return new X(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)}abs(){return Math.sqrt(this.re*this.re+this.im*this.im)}}class Dt{constructor(t,e,s){st(this,"width",0);st(this,"height",0);st(this,"data",[]);this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s,this.setDistancePerPixel(s)}setDistancePerPixel(t){this.distancePerPixel=t,this.width=Math.ceil(this.boundingBox.width/this.distancePerPixel),this.height=Math.ceil(this.boundingBox.height/this.distancePerPixel),this.data=Array(this.width*this.height)}}class Rt extends Dt{constructor(t,e,s,i){super(t,e,s),this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s,this.c=i}render(){if(this.c===void 0)throw new Error("c cannot be undefined when rendering Julia fractal");for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const s=new X(this.boundingBox.x0+e*this.distancePerPixel,this.boundingBox.y0+t*this.distancePerPixel);this.data[t*this.width+e]=this.juliaIteration(s)}}juliaIteration(t){for(let e=0;e<this.maxIterations;e++)if(t=t.mul(t).add(this.c),t.abs()>2)return e/this.maxIterations;return 1}}class Ht extends Dt{constructor(t,e,s){super(t,e,s),this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s}render(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const s=new X(this.boundingBox.x0+e*this.distancePerPixel,this.boundingBox.y0+t*this.distancePerPixel);this.data[t*this.width+e]=this.mandelbrotIteration(s)}}mandelbrotIteration(t){let e=t;for(let s=0;s<this.maxIterations;s++)if(e=e.mul(e).add(t),e.abs()>2)return s/this.maxIterations;return 1}coordFromMousePosition(t,e){const{x0:s,y0:i,x1:o,y1:n}=this.boundingBox,{width:C,height:L}=this,g=s+t/C*(o-s),S=i+e/L*(n-i);return new X(g,S)}}class Q{constructor(t,e,s,i){this.r=t,this.g=e,this.b=s,this.a=i}static fromHex(t,e=255){if(t.startsWith("#")&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)throw new Error("Invalid hex color");const s=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16);return new Q(s,i,o,e)}toHex(){return`#${this.r.toString(16)}${this.g.toString(16)}${this.b.toString(16)}`}static fromRGBA(t){t.startsWith("rgba(")&&(t=t.slice(5,-1));const[e,s,i,o]=t.split(",").map(n=>parseInt(n));return new Q(e,s,i,o)}toRGBA(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}invert(){return new Q(255-this.r,255-this.g,255-this.b,this.a)}interpolate(t,e){const s=this.r+(t.r-this.r)*e,i=this.g+(t.g-this.g)*e,o=this.b+(t.b-this.b)*e,n=this.a+(t.a-this.a)*e;return new Q(s,i,o,n)}get values(){return[this.r,this.g,this.b,this.a]}}function U(r){return r.map(t=>Q.fromHex(t))}const at={Honeydew:U(["ffffff","e9fae3","dee8d5","d5c7bc","ac92a6"]),Blue:U(["03256c","2541b2","1768ac","06bee1","ffffff"]),Volcanic:U(["586f7c","0d1317","bbc5aa","a72608","090c02"]),Spicy:U(["e1ce7a","fbffb9","fdd692","ec7357","754f44"]),Sweet:U(["eb5e55","3a3335","d81e5b","fdf0d5","c6d8d3"]),Coquelicot:U(["ffffff","f15025","e6e8e6","ced0ce","191919"])};function xt(r,t,e){const s=new Uint8ClampedArray(r.length*4);for(let i=0;i<r.length;i++){const o=e?e(r[i]):r[i],n=Jt(o,t);s[i*4+0]=n[0],s[i*4+1]=n[1],s[i*4+2]=n[2],s[i*4+3]=n[3]}return s}function Jt(r,t){let e;const s=t.length-1;for(let i=0;i<s;i++)if(r<=(i+1)/s){e=t[i].interpolate(t[i+1],(r-i/s)*s);break}return(e??t[t.length-1]).values}function It(r,t,e){const s=r.slice();return s[23]=t[e],s}function yt(r){let t,e=r[23]+"",s;return{c(){t=p("option"),s=z(e),this.h()},l(i){t=b(i,"OPTION",{});var o=w(t);s=K(o,e),o.forEach(d),this.h()},h(){t.__value=r[23],t.value=t.__value},m(i,o){T(i,t,o),c(t,s)},p:ht,d(i){i&&d(t)}}}function Pt(r){let t,e,s;return{c(){t=p("div"),e=p("p"),s=z("Click on the Mandelbrot set to see the corresponding Julia set"),this.h()},l(i){t=b(i,"DIV",{class:!0});var o=w(t);e=b(o,"P",{});var n=w(e);s=K(n,"Click on the Mandelbrot set to see the corresponding Julia set"),n.forEach(d),o.forEach(d),this.h()},h(){m(t,"class","absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 text-center rounded-md bg-white p-4 bg-opacity-20")},m(i,o){T(i,t,o),c(t,e),c(e,s)},d(i){i&&d(t)}}}function Tt(r){let t,e,s,i,o,n,C,L,g,S,h,j,l,k,I,H,P,B,W,Y,E,F,M,V,G,f,v,D,A,O,ot,dt,q=Object.keys(at),_=[];for(let a=0;a<q.length;a+=1)_[a]=yt(It(r,q,a));let y=(!r[1]||!r[1].c)&&Pt();return{c(){t=p("h1"),e=z("fractal-friends"),s=N(),i=p("div"),o=p("div"),n=p("label"),C=z("Palette"),L=N(),g=p("select");for(let a=0;a<_.length;a+=1)_[a].c();S=N(),h=p("div"),j=p("label"),l=z("Max iterations"),k=N(),I=p("input"),H=N(),P=p("div"),B=p("label"),W=z("Color fade:"),Y=N(),E=p("input"),F=N(),M=p("div"),V=p("div"),G=p("canvas"),f=N(),v=p("div"),y&&y.c(),D=N(),A=p("div"),O=p("canvas"),this.h()},l(a){t=b(a,"H1",{class:!0});var x=w(t);e=K(x,"fractal-friends"),x.forEach(d),s=R(a),i=b(a,"DIV",{class:!0});var u=w(i);o=b(u,"DIV",{});var J=w(o);n=b(J,"LABEL",{for:!0});var ft=w(n);C=K(ft,"Palette"),ft.forEach(d),L=R(J),g=b(J,"SELECT",{class:!0,name:!0});var ut=w(g);for(let lt=0;lt<_.length;lt+=1)_[lt].l(ut);ut.forEach(d),J.forEach(d),S=R(u),h=b(u,"DIV",{});var $=w(h);j=b($,"LABEL",{for:!0});var mt=w(j);l=K(mt,"Max iterations"),mt.forEach(d),k=R($),I=b($,"INPUT",{class:!0,type:!0,name:!0}),$.forEach(d),H=R(u),P=b(u,"DIV",{class:!0});var tt=w(P);B=b(tt,"LABEL",{for:!0});var gt=w(B);W=K(gt,"Color fade:"),gt.forEach(d),Y=R(tt),E=b(tt,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),tt.forEach(d),u.forEach(d),F=R(a),M=b(a,"DIV",{class:!0});var et=w(M);V=b(et,"DIV",{class:!0});var pt=w(V);G=b(pt,"CANVAS",{class:!0}),w(G).forEach(d),pt.forEach(d),f=R(et),v=b(et,"DIV",{class:!0});var it=w(v);y&&y.l(it),D=R(it),A=b(it,"DIV",{class:!0});var bt=w(A);O=b(bt,"CANVAS",{class:!0}),w(O).forEach(d),bt.forEach(d),it.forEach(d),et.forEach(d),this.h()},h(){m(t,"class","text-center text-xl m-6"),m(n,"for","palette"),m(g,"class","p-1 rounded text-center"),m(g,"name","palette"),r[0]===void 0&&Vt(()=>r[10].call(g)),m(j,"for","maxIters"),m(I,"class","p-1 rounded border border-gray-200 w-20"),m(I,"type","number"),m(I,"name","maxIters"),m(B,"for","curveParam"),m(E,"class","p-1"),m(E,"type","range"),m(E,"min","-1"),m(E,"max","0"),m(E,"step","0.01"),m(P,"class","flex flex-row justify-center space-x-4"),m(i,"class","text-center m-4 space-y-2"),m(G,"class","cursor-pointer"),m(V,"class","flex justify-center align-center m-1 p-2 drop-shadow rounded-md"),rt(V,"background-color",r[6][0].toRGBA()),m(O,"class",""),m(A,"class","flex justify-center align-center m-1 p-2 drop-shadow rounded-md"),rt(A,"background-color",r[6][0].toRGBA()),m(v,"class","relative justify-center align-center"),m(M,"class","flex flex-row justify-center flex-wrap space-2")},m(a,x){T(a,t,x),c(t,e),T(a,s,x),T(a,i,x),c(i,o),c(o,n),c(n,C),c(o,L),c(o,g);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m(g,null);wt(g,r[0],!0),c(i,S),c(i,h),c(h,j),c(j,l),c(h,k),c(h,I),nt(I,r[2]),c(i,H),c(i,P),c(P,B),c(B,W),c(P,Y),c(P,E),nt(E,r[3]),T(a,F,x),T(a,M,x),c(M,V),c(V,G),r[13](G),c(M,f),c(M,v),y&&y.m(v,null),c(v,D),c(v,A),c(A,O),r[15](O),ot||(dt=[Z(g,"change",r[10]),Z(I,"input",r[11]),Z(E,"change",r[12]),Z(E,"input",r[12]),Z(G,"click",r[14])],ot=!0)},p(a,[x]){if(x&0){q=Object.keys(at);let u;for(u=0;u<q.length;u+=1){const J=It(a,q,u);_[u]?_[u].p(J,x):(_[u]=yt(J),_[u].c(),_[u].m(g,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=q.length}x&1&&wt(g,a[0]),x&4&&ct(I.value)!==a[2]&&nt(I,a[2]),x&8&&nt(E,a[3]),x&64&&rt(V,"background-color",a[6][0].toRGBA()),!a[1]||!a[1].c?y||(y=Pt(),y.c(),y.m(v,D)):y&&(y.d(1),y=null),x&64&&rt(A,"background-color",a[6][0].toRGBA())},i:ht,o:ht,d(a){a&&d(t),a&&d(s),a&&d(i),Lt(_,a),a&&d(F),a&&d(M),r[13](null),y&&y.d(),r[15](null),ot=!1,St(dt)}}}let Et=.8,Bt=600;function Wt(r,t,e){let s,i,o,n,C,L=!1,g="Volcanic";const S=new vt(-2,-1.25,1,1.25);let h;const j=new vt(-1.75,-1.75,1.75,1.75);let l,k=50,I=-.5,H;Gt(()=>{const f=Math.min(window.innerWidth*Et,Bt);o=i.getContext("2d"),e(9,h=new Ht(S,k,S.width/f)),e(4,i.width=h.width,i),e(4,i.height=h.height,i),C=n.getContext("2d"),e(1,l=new Rt(j,k,j.width/f)),e(5,n.width=l.width,n),e(5,n.height=l.height,n),P(),e(8,L=!0),window.addEventListener("resize",v=>{const D=Math.min(window.innerWidth*Et,Bt);h.setDistancePerPixel(S.width/D),P(),e(4,i.width=h.width,i),e(4,i.height=h.height,i),l.setDistancePerPixel(j.width/D),l.c&&B(l.c),e(5,n.width=l.width,n),e(5,n.height=l.height,n)})});function P(f=!0){if(!o)throw new Error("No mandelbrot context");if(!h)throw new Error("No mandelbrot");f&&h.render();const v=xt(h.data,s,H),D=o.createImageData(h.width,h.height);D.data.set(v),o.putImageData(D,0,0)}function B(f,v=!0){if(!C)throw new Error("no julia contex");if(e(5,n.width=l.width,n),e(5,n.height=l.height,n),v){if(!f)throw new Error("c must be defined when rerendering");e(1,l.c=f,l),l.render()}const D=xt(l.data,s,H),A=C.createImageData(l.width,l.height);A.data.set(D),C.putImageData(A,0,0)}function W(f){const v=h.coordFromMousePosition(f.offsetX,f.offsetY);B(v)}function Y(){g=Nt(this),e(0,g)}function E(){k=ct(this.value),e(2,k)}function F(){I=ct(this.value),e(3,I)}function M(f){_t[f?"unshift":"push"](()=>{i=f,e(4,i)})}const V=f=>W(f);function G(f){_t[f?"unshift":"push"](()=>{n=f,e(5,n)})}return r.$$.update=()=>{r.$$.dirty&1&&e(6,s=at[g]),r.$$.dirty&518&&(h&&(e(9,h.maxIterations=k,h),P()),l&&(e(1,l.maxIterations=k,l),l.c&&B(l.c))),r.$$.dirty&259&&(e(6,s=at[g]),L&&(P(!1),l&&l.c&&B(l.c,!1))),r.$$.dirty&522&&(H=f=>Math.pow(f,Math.pow(10,I)),h&&P(!1),l&&l.c&&B(l.c,!1))},[g,l,k,I,i,n,s,W,L,h,Y,E,F,M,V,G]}class qt extends At{constructor(t){super(),Ct(this,t,Wt,Tt,jt,{})}}export{qt as default};
