var Nt=Object.defineProperty;var St=(r,t,e)=>t in r?Nt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var nt=(r,t,e)=>(St(r,typeof t!="symbol"?t+"":t,e),e);import{S as Lt,i as Tt,s as Gt,k as g,q as O,a as N,l as b,m as p,r as X,h as c,c as S,n as d,J as Rt,p as ot,b as G,G as h,K as Et,L as lt,M as et,N as ut,H as mt,O as Wt,P as Ht,o as Jt,Q as qt,w as yt}from"../chunks/index.06967d51.js";class Bt{constructor(t,e,s,i){this.x0=t,this.y0=e,this.x1=s,this.y1=i}get width(){return this.x1-this.x0}get height(){return this.y1-this.y0}}class Q{constructor(t,e){this.re=t,this.im=e}add(t){return new Q(this.re+t.re,this.im+t.im)}mul(t){return new Q(this.re*t.re-this.im*t.im,this.re*t.im+this.im*t.re)}abs(){return Math.sqrt(this.re*this.re+this.im*this.im)}}class Vt{constructor(t,e,s){nt(this,"width",0);nt(this,"height",0);nt(this,"data",[]);this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s,this.setDistancePerPixel(s)}setDistancePerPixel(t){this.distancePerPixel=t,this.width=Math.ceil(this.boundingBox.width/this.distancePerPixel),this.height=Math.ceil(this.boundingBox.height/this.distancePerPixel),this.data=Array(this.width*this.height)}}class Ft extends Vt{constructor(t,e,s,i){super(t,e,s),this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s,this.c=i}render(){if(this.c===void 0)throw new Error("c cannot be undefined when rendering Julia fractal");for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const s=new Q(this.boundingBox.x0+e*this.distancePerPixel,this.boundingBox.y0+t*this.distancePerPixel);this.data[t*this.width+e]=this.juliaIteration(s)}}juliaIteration(t){for(let e=0;e<this.maxIterations;e++)if(t=t.mul(t).add(this.c),t.abs()>2)return e/this.maxIterations;return 1}}class Ot extends Vt{constructor(t,e,s){super(t,e,s),this.boundingBox=t,this.maxIterations=e,this.distancePerPixel=s}render(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++){const s=new Q(this.boundingBox.x0+e*this.distancePerPixel,this.boundingBox.y0+t*this.distancePerPixel);this.data[t*this.width+e]=this.mandelbrotIteration(s)}}mandelbrotIteration(t){let e=t;for(let s=0;s<this.maxIterations;s++)if(e=e.mul(e).add(t),e.abs()>2)return s/this.maxIterations;return 1}coordFromMousePosition(t,e){const{x0:s,y0:i,x1:a,y1:f}=this.boundingBox,{width:R,height:B}=this,w=s+t/R*(a-s),H=i+e/B*(f-i);return new Q(w,H)}}class K{constructor(t,e,s,i){this.r=t,this.g=e,this.b=s,this.a=i}static fromHex(t,e=255){if(t.startsWith("#")&&(t=t.slice(1)),t.length===3&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length!==6)throw new Error("Invalid hex color");const s=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),a=parseInt(t.slice(4,6),16);return new K(s,i,a,e)}toHex(){return`#${this.r.toString(16)}${this.g.toString(16)}${this.b.toString(16)}`}static fromRGBA(t){t.startsWith("rgba(")&&(t=t.slice(5,-1));const[e,s,i,a]=t.split(",").map(f=>parseInt(f));return new K(e,s,i,a)}toRGBA(){return`rgba(${this.r}, ${this.g}, ${this.b}, ${this.a})`}invert(){return new K(255-this.r,255-this.g,255-this.b,this.a)}interpolate(t,e){const s=this.r+(t.r-this.r)*e,i=this.g+(t.g-this.g)*e,a=this.b+(t.b-this.b)*e,f=this.a+(t.a-this.a)*e;return new K(s,i,a,f)}get values(){return[this.r,this.g,this.b,this.a]}}function z(r){return r.map(t=>K.fromHex(t))}const ht={Honeydew:z(["e1efe6","efcb68","aeb7b3","000411","d6eaff"]),Blue:z(["03256c","2541b2","1768ac","06bee1","ffffff"]),Volcanic:z(["586f7c","0d1317","bbc5aa","a72608","090c02"]),Spicy:z(["ffffff","f7f7f7","efa00b","d65108","591f0a"]),Sweet:z(["eb5e55","3a3335","d81e5b","fdf0d5","c6d8d3"]),Coquelicot:z(["ffffff","f15025","e6e8e6","ced0ce","191919"])};function kt(r,t,e){const s=new Uint8ClampedArray(r.length*4);for(let i=0;i<r.length;i++){const a=e?e(r[i]):r[i],f=Xt(a,t);s[i*4+0]=f[0],s[i*4+1]=f[1],s[i*4+2]=f[2],s[i*4+3]=f[3]}return s}function Xt(r,t){let e;const s=t.length-1;for(let i=0;i<s;i++)if(r<=(i+1)/s){e=t[i].interpolate(t[i+1],(r-i/s)*s);break}return(e??t[t.length-1]).values}function Dt(r,t,e){const s=r.slice();return s[26]=t[e],s}function Mt(r){let t,e=r[26]+"",s;return{c(){t=g("option"),s=O(e),this.h()},l(i){t=b(i,"OPTION",{});var a=p(t);s=X(a,e),a.forEach(c),this.h()},h(){t.__value=r[26],t.value=t.__value},m(i,a){G(i,t,a),h(t,s)},p:mt,d(i){i&&c(t)}}}function At(r){let t,e,s;return{c(){t=g("div"),e=g("p"),s=O("Click on the Mandelbrot set to see the corresponding Julia set"),this.h()},l(i){t=b(i,"DIV",{class:!0});var a=p(t);e=b(a,"P",{});var f=p(e);s=X(f,"Click on the Mandelbrot set to see the corresponding Julia set"),f.forEach(c),a.forEach(c),this.h()},h(){d(t,"class","absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-10 text-center rounded-md bg-white p-4 bg-opacity-20")},m(i,a){G(i,t,a),h(t,e),h(e,s)},d(i){i&&c(t)}}}function Ut(r){let t,e,s,i,a,f,R,B,w,H,k,m,J,l,P,Z,y,A,$,C,v,q,D,j,L,tt,M,U,o,_,T,V,W,ct,dt,gt,Y=Object.keys(ht),I=[];for(let n=0;n<Y.length;n+=1)I[n]=Mt(Dt(r,Y,n));let E=(!r[6]||!r[6].c)&&At();return{c(){t=g("h1"),e=O("fractal-friends"),s=N(),i=g("div"),a=g("div"),f=g("label"),R=O("Palette"),B=N(),w=g("select");for(let n=0;n<I.length;n+=1)I[n].c();H=N(),k=g("div"),m=g("label"),J=O("Max iterations"),l=N(),P=g("input"),Z=N(),y=g("div"),A=g("label"),$=O("Color fade:"),C=N(),v=g("input"),q=N(),D=g("div"),j=g("div"),L=g("canvas"),tt=N(),M=g("div"),E&&E.c(),U=N(),o=g("div"),_=g("canvas"),T=N(),V=g("div"),W=g("a"),ct=O("What is this?"),this.h()},l(n){t=b(n,"H1",{class:!0});var x=p(t);e=X(x,"fractal-friends"),x.forEach(c),s=S(n),i=b(n,"DIV",{class:!0});var u=p(i);a=b(u,"DIV",{});var F=p(a);f=b(F,"LABEL",{for:!0});var bt=p(f);R=X(bt,"Palette"),bt.forEach(c),B=S(F),w=b(F,"SELECT",{class:!0,name:!0});var pt=p(w);for(let ft=0;ft<I.length;ft+=1)I[ft].l(pt);pt.forEach(c),F.forEach(c),H=S(u),k=b(u,"DIV",{});var st=p(k);m=b(st,"LABEL",{for:!0});var wt=p(m);J=X(wt,"Max iterations"),wt.forEach(c),l=S(st),P=b(st,"INPUT",{class:!0,type:!0,name:!0}),st.forEach(c),Z=S(u),y=b(u,"DIV",{class:!0});var it=p(y);A=b(it,"LABEL",{for:!0});var vt=p(A);$=X(vt,"Color fade:"),vt.forEach(c),C=S(it),v=b(it,"INPUT",{class:!0,type:!0,min:!0,max:!0,step:!0}),it.forEach(c),u.forEach(c),q=S(n),D=b(n,"DIV",{class:!0});var rt=p(D);j=b(rt,"DIV",{class:!0});var _t=p(j);L=b(_t,"CANVAS",{class:!0}),p(L).forEach(c),_t.forEach(c),tt=S(rt),M=b(rt,"DIV",{class:!0});var at=p(M);E&&E.l(at),U=S(at),o=b(at,"DIV",{class:!0});var xt=p(o);_=b(xt,"CANVAS",{class:!0}),p(_).forEach(c),xt.forEach(c),at.forEach(c),rt.forEach(c),T=S(n),V=b(n,"DIV",{class:!0});var Pt=p(V);W=b(Pt,"A",{class:!0,href:!0,target:!0});var It=p(W);ct=X(It,"What is this?"),It.forEach(c),Pt.forEach(c),this.h()},h(){d(t,"class","text-center text-xl m-6"),d(f,"for","palette"),d(w,"class","p-1 rounded text-center"),d(w,"name","palette"),r[0]===void 0&&Rt(()=>r[8].call(w)),d(m,"for","maxIters"),d(P,"class","p-1 rounded border border-gray-200 w-20"),d(P,"type","number"),d(P,"name","maxIters"),d(A,"for","curveParam"),d(v,"class","p-1"),d(v,"type","range"),d(v,"min","-1"),d(v,"max","0"),d(v,"step","0.01"),d(y,"class","flex flex-row justify-center space-x-4"),d(i,"class","text-center m-4 space-y-2"),d(L,"class","cursor-pointer self-center"),d(j,"class","flex justify-center align-center m-1 p-2 drop-shadow rounded-md"),ot(j,"background-color",r[5][0].toRGBA()),d(_,"class",""),d(o,"class","flex justify-center align-center m-1 p-2 drop-shadow rounded-md self-center"),ot(o,"background-color",r[5][0].toRGBA()),d(M,"class","relative justify-center align-center"),d(D,"class","flex flex-row justify-center flex-wrap space-2"),d(W,"class","text-gray-400 hover:font-bold"),d(W,"href","https://quevivasbien.github.io/posts/fractal-friends/"),d(W,"target","_blank"),d(V,"class","m-6 text-center")},m(n,x){G(n,t,x),h(t,e),G(n,s,x),G(n,i,x),h(i,a),h(a,f),h(f,R),h(a,B),h(a,w);for(let u=0;u<I.length;u+=1)I[u]&&I[u].m(w,null);Et(w,r[0],!0),h(i,H),h(i,k),h(k,m),h(m,J),h(k,l),h(k,P),lt(P,r[1]),h(i,Z),h(i,y),h(y,A),h(A,$),h(y,C),h(y,v),lt(v,r[2]),G(n,q,x),G(n,D,x),h(D,j),h(j,L),r[11](L),h(D,tt),h(D,M),E&&E.m(M,null),h(M,U),h(M,o),h(o,_),r[13](_),G(n,T,x),G(n,V,x),h(V,W),h(W,ct),dt||(gt=[et(w,"change",r[8]),et(P,"input",r[9]),et(v,"change",r[10]),et(v,"input",r[10]),et(L,"click",r[12])],dt=!0)},p(n,[x]){if(x&0){Y=Object.keys(ht);let u;for(u=0;u<Y.length;u+=1){const F=Dt(n,Y,u);I[u]?I[u].p(F,x):(I[u]=Mt(F),I[u].c(),I[u].m(w,null))}for(;u<I.length;u+=1)I[u].d(1);I.length=Y.length}x&1&&Et(w,n[0]),x&2&&ut(P.value)!==n[1]&&lt(P,n[1]),x&4&&lt(v,n[2]),x&32&&ot(j,"background-color",n[5][0].toRGBA()),!n[6]||!n[6].c?E||(E=At(),E.c(),E.m(M,U)):E&&(E.d(1),E=null),x&32&&ot(o,"background-color",n[5][0].toRGBA())},i:mt,o:mt,d(n){n&&c(t),n&&c(s),n&&c(i),Wt(I,n),n&&c(q),n&&c(D),r[11](null),E&&E.d(),r[13](null),n&&c(T),n&&c(V),dt=!1,Ht(gt)}}}let Ct=.8,jt=600;function Yt(r,t,e,s="red"){r.strokeStyle=s,r.beginPath(),r.moveTo(t-5,e-5),r.lineTo(t+5,e+5),r.moveTo(t-5,e+5),r.lineTo(t+5,e-5),r.stroke()}function zt(r,t,e){let s,i,a,f,R=!1,B="Volcanic",w=ht[B];function H(o){e(5,w=ht[o]),R&&(C(!1),l&&l.c&&v(l.c,!1))}const k=new Bt(-2,-1.4,1,1.4);let m;const J=new Bt(-1.75,-1.75,1.75,1.75);let l,P=50;function Z(o){m&&(m.maxIterations=o,C()),l&&(e(6,l.maxIterations=o,l),l.c&&v(l.c))}let y=-.5,A;function $(o){A=_=>Math.pow(_,Math.pow(10,o)),m&&C(!1),l&&l.c&&v(l.c,!1)}Jt(()=>{const o=Math.min(window.innerWidth*Ct,jt);i=s.getContext("2d"),m=new Ot(k,P,k.width/o),e(3,s.width=m.width,s),e(3,s.height=m.height,s),f=a.getContext("2d"),e(6,l=new Ft(J,P,J.width/o)),e(4,a.width=l.width,a),e(4,a.height=l.height,a),C(),R=!0,window.addEventListener("resize",()=>{const _=Math.min(window.innerWidth*Ct,jt);m.setDistancePerPixel(k.width/_),e(3,s.width=m.width,s),e(3,s.height=m.height,s),C(),l.setDistancePerPixel(J.width/_),e(4,a.width=l.width,a),e(4,a.height=l.height,a),l.c&&v(l.c)})});function C(o=!0){if(!i)throw new Error("No mandelbrot context");if(!m)throw new Error("No mandelbrot");o&&m.render();const _=kt(m.data,w,A),T=i.createImageData(m.width,m.height);T.data.set(_),i.putImageData(T,0,0)}function v(o,_=!0){if(!f)throw new Error("no julia contex");if(e(4,a.width=l.width,a),e(4,a.height=l.height,a),_){if(!o)throw new Error("c must be defined when rerendering");e(6,l.c=o,l),l.render()}const T=kt(l.data,w,A),V=f.createImageData(l.width,l.height);V.data.set(T),f.putImageData(V,0,0)}function q(o){const _=m.coordFromMousePosition(o.offsetX,o.offsetY);if(console.log("Clicked at",o.offsetX,o.offsetY,"which is",_),i)C(!1),Yt(i,o.offsetX,o.offsetY);else throw new Error("No mandelbrot context");v(_)}function D(){B=qt(this),e(0,B)}function j(){P=ut(this.value),e(1,P)}function L(){y=ut(this.value),e(2,y)}function tt(o){yt[o?"unshift":"push"](()=>{s=o,e(3,s)})}const M=o=>q(o);function U(o){yt[o?"unshift":"push"](()=>{a=o,e(4,a)})}return r.$$.update=()=>{r.$$.dirty&1&&H(B),r.$$.dirty&2&&Z(P),r.$$.dirty&4&&$(y)},[B,P,y,s,a,w,l,q,D,j,L,tt,M,U]}class Zt extends Lt{constructor(t){super(),Tt(this,t,zt,Ut,Gt,{})}}export{Zt as default};
